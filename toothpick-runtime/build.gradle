apply plugin: 'java'

sourceCompatibility = 1.7
targetCompatibility = 1.7

dependencies {
  compile project(':toothpick-core')
  compile deps.inject

  testCompile deps.junit
  testCompile project(':toothpick-compiler')
  testCompile deps.easymock
  testCompile deps.powermock
}

test {
  if ("$System.env.TRAVIS_BRANCH" != "integration-tests") {
    exclude '**/integration/**'
  }
}

compileTestJava {
  doFirst {
    options.compilerArgs = [
        '-processor', "toothpick.compiler.memberinjector.MemberInjectorProcessor,toothpick.compiler.factory.FactoryProcessor",
        '-Atoothpick_registry_package_name=toothpick.test',
    ]
  }
}
